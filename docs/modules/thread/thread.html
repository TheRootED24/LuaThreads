<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../threads.html">threads</a>
	</li>

	<li>
		<a href="thread.html">threads.thread</a>
	</li>

	<li>
		<a href="attr.html">threads.thread.attr</a>
	</li>

	<li>
		<a href="cond.html">threads.thread.cond</a>
	</li>

	<li>
		<a href="mutex.html">threads.thread.mutex</a>
	</li>

	<li><strong>threads.thread</strong></li>
	
</ul>



<!-- File list -->







</div><!-- id="navigation" -->

<div id="content">

<h1>Class <code>threads.thread</code></h1>

<p>
 Low-level thread creation and manipulation library.</p>


<!--

	{ "new",	thread_new	},
	{ "create",	thread_create	},
	{ "yield",	thread_yield	},
	{ "resume",	thread_resume	},
	{ "complete",	thread_complete	},
	{ "join",	thread_join	},
	{ "cancel",	thread_cancel	},

	{ "mutex",	thread_mutex,	},
	{ "sem",	thread_sem,	},

	{ "id",		thread_id	},
	{ "run", 	thread_run	},
	{ "state", 	thread_state	},
	{ "sleep",	thread_sleep	},
	{ "exit",	thread_exit	},-->	


<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#threads.thread.new">new</a>&nbsp;( lto )</td>
	<td class="summary">
	Create a new lua thread object, or validate a lua thread object passed by a function</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#threads.thread.create">create</a>&nbsp;( lto, func, lto2)</td>
	<td class="summary">Create (run) a new lua thread, provide it a lua function to run, and optionally, provide parent or partner thread access <strong>lto2</strong></td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#threads.thread.yield">yield</a>&nbsp;( lto )</td>
	<td class="summary">Yield an active lua thread</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#threads.thread.resume">resume</a>&nbsp;( lto )</td>
	<td class="summary">Resume a yielded lua thread</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#threads.thread.complete">complete</a>&nbsp;( lto )</td>
	<td class="summary">Signal an active lua thread to complete and return</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#threads.thread.join">join</a>&nbsp;( lto )</td>
	<td class="summary">Join a completed lua thread to free the resources</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#threads.thread.cancel">cancel</a>&nbsp;( lto )</td>
	<td class="summary">Signal a lua thread to terminate and return </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#threads.thread.mutex">mutex</a>&nbsp;( lto )</td>
	<td class="summary">Access a lua threads internal mutex</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#threads.thread.sem">sem</a>&nbsp;( lto )</td>
	<td class="summary">Access a lua threads internal semaphore</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#threads.thread.id">id</a>&nbsp;( lto )</td>
	<td class="summary">Get a lua threads lua id number</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#threads.thread.run">run</a>&nbsp;( lto, bool )</td>
	<td class="summary">Check lua threads running state.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#threads.thread.state">state</a>&nbsp;( lto )</td>
	<td class="summary">Check a lua threads execution state</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#threads.thread.sleep">sleep</a>&nbsp;( sec, nsec )</td>
	<td class="summary">Force a thread to sleep</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#threads.threa.exit">exit</a>&nbsp;( lto )</td>
	<td class="summary">Force a lua thread to exit without returning</td>
	</tr>



</table>






<br/>
<br/>


<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="threads.thread.new"></a><strong>new</strong>&nbsp;( lto )</dt>
<dd>

 Create a new thread or validate thread passed by function


<h3>Parameters</h3>
<ul>
	<li>
	  lto: thread object (optional)
	</li>
</ul>


<h3>Usage:</h3>
<h5> Create a new thread object </h5>
local t1 = thread.create() <br/>
<h5> Validate a passed thread object </h5>
function func(t)<br/>
&nbsp;&nbsp;&nbsp;local t = thread.new(t)<br/><br/>
...



<h3>Return value:</h3>
a valid thread object upon success or error if passed thread is invalid or thread creation fails<br/>
</dd>


<dt><a name="threads.thread.create"></a><strong>create</strong>&nbsp;(lto, func, lto2)</dt>
<dd> Create and initiate a new lua thread

<h3>Parameters:</h3>
<ul>
	<li>
	  lto: Lua thread object
	</li>
	<li>
	  func: a lua function to run (must be global)
	</li>
	<li>
	  lto2: parent or partner lua thread. (optional)
	</li>
</ul>

<h3>Usage:</h3>
<ul>
	<li><h4>Create a single thread</h4><br/>
	<code>threads.thread.create(t1, "func")</code><br/><br/>
	<li>Create a single thread with access to parent/partner<br/>
	<code>threads.thread.create(t1, "func", t2);</code><br/>
</ul>

<h3>Return value:</h3>
0 if thread is created or non zero errno value if creation fails 

<h3>See also:</h3>
<ul>
	<li><a href="threads.thread.new">
		threads.thread.new
	</a>
	<li><a href="threads.thread.join">
		threads.thread.join
	</a>

</ul>
<h3>Demo</h3>
<ul>
	<li><a href="threads.thread.new">
			simple-thread-demo
	</a></li>
</ul>
</dd>


<dt><a name="threads.thread.yield"></a><strong>yield</strong>&nbsp;( lto )</dt>
<dd> Yield an active lua thread.

<h3>Parameters</h3>
<ul>
	<li>
	  lto: Lua thread object
	</li>
</ul>

<h3>Usage:</h3>
<h5>Yield a thread</h5>
	require "threads"<br/>
	local thread = threads.thread;<br/><br/>

	function print_tid( t )<br/>
	&nbsp;&nbsp;&nbsp;local t = thread.new(t);<br/>
	while( thread.state(t) == WORKING) do -- or t:state()<br/>
	&nbsp;&nbsp;&nbsp;print(t.id)<br/>
	<strong>&nbsp;&nbsp;&nbsp;thread.yield(t) -- or t:yield()<br/></strong>
	end<br/><br/>

	local function main(...)<br/>
	&nbsp;&nbsp;&nbsp;local t1 = thread.new();<br/>
	&nbsp;&nbsp;&nbsp;local ret = thread.create(t1, "print_tid", t2);<br/><br/>
	&nbsp;&nbsp;&nbsp;for i=1, 10 do<br/>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread.resume(t1) -- or t1:resume()<br/>
	&nbsp;&nbsp;&nbsp;end<br/>
	&nbsp;&nbsp;&nbsp;ret = thread.join(t1);<br/>
	end<br/>



<h3>Return value:</h3>
a valid thread object upon success or error if passed thread is invalid or thread creation fails.<br/>
</dd>

<dt><a name="thread.thread.resume"></a><strong>resume</strong>&nbsp;( lto )</dt>
<dd>Resume a yielded lua thread

<h3>Parameters</h3>
<ul>
	<li>
	  lto: Lua thread object
	</li>
</ul>


<h3>Return value:</h3>
0 success 1 on failure
</dd>

<dt><a name="threads.thread.complete"></a><strong>complete</strong>&nbsp;( lto )</dt>
<dd> Signal a lua thread to complete its tasks and return.

<h3>Parameters</h3>
<ul>
	<li>
	  t: Lua thread object
	</li>
</ul>

<h3>Usage:</h3>


<h3>Return value:</h3>
0 success 1 on failure
</dd>

<dt><a name="threads.thread.join"></a><strong>join</strong>&nbsp;( lto )</dt>
<dd> Join or wait on a lua thread to finish and free its resouces.

<h3>Parameters</h3>
<ul>
	<li>
	  lto: Lua thread object
	</li>
</ul>

<h3>Usage:</h3>


<h3>Return value:</h3>
0 success 1 on failure
</dd>

<dt><a name="threads.thread.cancel"></a><strong>cancel</strong>&nbsp;( lto )</dt>
<dd> Signal a lua thread to terminate and return instantly witout completing task if nessesscary.

<h3>Parameters</h3>
<ul>
	<li>
	  t: Lua thread object
	</li>
</ul>

<h3>Usage:</h3>


<h3>Return value:</h3>
0 success 1 on failure
</dd>


<dt><a name="threads.thread.mutex"></a><strong>mutex</strong>&nbsp;( lto )</dt>
<dd> Access a lua threads internal mutex

<h3>Parameters</h3>
<ul>
	<li>
	  lto: Lua thread object
	</li>
</ul>

<h3>Usage:</h3>


<h3>Return value:</h3>
the lua threads internal (initialized) mutex.
</dd>

<dt><a name="threads.thread.sem"></a><strong>sem</strong>&nbsp;( lto )</dt>
<dd> Access a lua threads internal semaphore

<h3>Parameters</h3>
<ul>
	<li>
	  lto: Lua thread object
	</li>
</ul>

<h3>Usage:</h3>


<h3>Return value:</h3>
the lua threads internal (initialized) mutex.
</dd>

<dt><a name="threads.thread.run"></a><strong>run</strong>&nbsp;( lto )</dt>
<dd> Get a lua threads running state [ true | false ]

<h3>Parameters</h3>
<ul>
	<li>
	  lto: Lua thread object
	</li>
</ul>

<h3>Usage:</h3>


<h3>Return value:</h3>
boolen representing the lua thread objects' running state
</dd>

<dt><a name="threads.thread.state"></a><strong>state</strong>&nbsp;( lto )</dt>
<dd> Get a lua threads execution state [ WORKING | SUSPENDED | ERROR | OK ]

<h3>Parameters</h3>
<ul>

	<li>
	  lto: Lua thread object
	</li>
</ul>

<h3>Usage:</h3>


<h3>Return value:</h3>
A number value, representing the lua thread objects' execution state.
</dd>

<dt><a name="nixio.fs.lstat"></a><strong>sleep</strong>&nbsp;( sec, nsec )</dt>
<dd> Force a thread to sleep for seconds or nano-seconds.

<h3>Parameters</h3>
<ul>
	<li>
	  sec: Integer value representing seconds to sleep
	</li>
	<li>
	  nsec: Integer value representing nano seconds to sleep
	</li>
</ul>

<h3>Usage:</h3>


<h3>Return value:</h3>
No vaule returned

<h3>See also:</h3>
<ul>
	<li><a href="#nixio.fs.stat">
		stat
	</a>
</ul>
</dd>

<dt><a name="threads.thread.exit"></a><strong>exit</strong>&nbsp;( lto )</dt>
<dd> Force a lua thread to exit without returning.

<h3>Parameters</h3>
<ul>
	<li>
	  lto: Lua thread object
	</li>
</ul>

<h3>Usage:</h3>


<h3>Return value:</h3>
0 success 1 on failure

<h3>See also:</h3>
<ul>
	<li><a href="#threads.thread.complete">
		thread.complete(t)
	</a>
	<li><a href="threads.thread.cancel">
		thread.cancel
	</a>
</ul>
</dd>
</dl>


</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->
</body>
</html>
